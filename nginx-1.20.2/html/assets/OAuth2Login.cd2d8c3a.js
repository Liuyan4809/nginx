import{i as e,s}from"./useLogin.5ee5275e.js";import{d as a,k as t,_ as r,a2 as o,a3 as i}from"./vue-vendor.1938e417.js";import{z as n,aw as u,aS as p,aa as d,u as l,A as g}from"./index.8e60a3c0.js";import"./vendor.ece5be17.js";import"./__commonjsHelpers__.488ed5c2.js";const c=a({__name:"OAuth2Login",setup(a){const c=t(e()),m=t({thirdApp:!1,wxWork:!1,dingtalk:!1}),{currentRoute:v}=r(),h=v.value;return e()||n.replace({path:u.BASE_LOGIN,query:h.query}),c.value&&function(){/wxwork/i.test(navigator.userAgent)&&(m.value.thirdApp=!0,m.value.wxWork=!0);/dingtalk/i.test(navigator.userAgent)&&(m.value.thirdApp=!0,m.value.dingtalk=!0);m.value.thirdApp&&(h.query.oauth2LoginToken?function(e){const s=d(),{notification:a}=g(),{t:t}=l();s.ThirdLogin(e).then((e=>{e&&e.userInfo?a.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${e.userInfo.realName}`,duration:3}):a.error({message:t("sys.login.errorTip"),description:((e.response||{}).data||{}).message||e.message||t("sys.login.networkExceptionMsg"),duration:4})}))}({thirdType:h.query.thirdType,tenantId:p}):m.value.wxWork?s("wechat_enterprise"):m.value.dingtalk&&s("dingtalk"))}(),(e,s)=>(o(),i("div"))}});export{c as default};
