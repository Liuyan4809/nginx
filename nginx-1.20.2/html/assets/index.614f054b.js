import{u as t,e,_ as a,a as n,w as s}from"./index.8e60a3c0.js";import{ap as o,aH as u,_ as r}from"./vendor.ece5be17.js";import{u as l}from"./useCountdown.293f285b.js";import{r as i,a8 as c,s as d,e as p,q as f,J as v,u as m,g as C,d as g,k as y,Y as b,a2 as x,ab as S,ad as h,E as j,ag as w,ac as F,ak as z,ai as B,R as A,aj as k,al as T,f as $}from"./vue-vendor.1938e417.js";function _(t,e="value",a="change",n){const s=C(),r=null==s?void 0:s.emit,l=o.useInjectFormItemContext(),g=i({value:t[e]}),y=c(g);d((()=>{g.value=t[e]}));return[p({get:()=>null==g.value||""===g.value?[]:g.value,set(t){u(t,y.value)||(g.value=t,f((()=>{null==r||r(a,t,...v(m(n))||[]),f((()=>l.onFieldChange()))})))}}),t=>{g.value=t},y,l]}const I=a(g({name:"CountButton",components:{Button:r},props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(a){const n=y(!1),{currentCount:s,isStart:o,start:u,reset:r}=l(a.count),{t:i}=t(),c=p((()=>m(o)?i("component.countdown.sendText",[m(s)]):i("component.countdown.normalText")));return d((()=>{void 0===a.value&&r()})),{handleStart:function(){return t=this,s=null,o=function*(){const{beforeStartFunc:t}=a;if(t&&e(t)){n.value=!0;try{(yield t())&&u()}finally{n.value=!1}}else u()},new Promise(((e,a)=>{var n=t=>{try{r(o.next(t))}catch(e){a(e)}},u=t=>{try{r(o.throw(t))}catch(e){a(e)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,u);r((o=o.apply(t,s)).next())}));var t,s,o},currentCount:s,loading:n,getButtonText:c,isStart:o}}}),[["render",function(t,e,a,n,s,o){const u=b("Button");return x(),S(u,F(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:h((()=>[j(w(t.getButtonText),1)])),_:1},16,["disabled","onClick","loading"])}]]);const N=s(a(g({name:"CountDownInput",components:{CountButton:I},inheritAttrs:!1,props:{value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(t){const{prefixCls:e}=n("countdown-input"),[a]=_(t);return{prefixCls:e,state:a}}}),[["render",function(t,e,a,n,s,o){const u=b("CountButton"),r=b("a-input");return x(),S(r,F(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),z({addonAfter:h((()=>[$(u,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])])),_:2},[B(Object.keys(t.$slots).filter((t=>"addonAfter"!==t)),(e=>({name:e,fn:h((a=>[A(t.$slots,e,k(T(a||{})))]))})))]),1040,["class","size","value"])}]]));s(I);export{N as C,_ as u};
