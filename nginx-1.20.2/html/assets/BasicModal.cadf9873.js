var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,l,n)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,r=(e,t)=>{for(var l in t||(t={}))o.call(t,l)&&s(e,l,t[l]);if(n)for(var l of n(t))a.call(t,l)&&s(e,l,t[l]);return e},i=(e,n)=>t(e,l(n)),c=(e,t,l)=>new Promise(((n,o)=>{var a=e=>{try{r(l.next(e))}catch(t){o(t)}},s=e=>{try{r(l.throw(e))}catch(t){o(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,s);r((l=l.apply(e,t)).next())}));import{M as u,bs as p,T as d,b4 as m,b5 as f,aZ as g,bt as h,bu as b,o as y}from"./vendor.ece5be17.js";import{u as C,s as v,b as S,$ as k,af as O,ag as F,S as H,_ as B,a as x,B as P,e as w,c as M}from"./index.8e60a3c0.js";import{s as T,u as j,d as N,H as $,f as R,i as W,k as _,e as E,w as A,o as q,b as D,q as z,Y as L,v as I,a2 as V,ab as Y,ad as X,t as Z,a3 as G,R as J,a9 as K,F as Q,Z as U,a4 as ee,E as te,ag as le,ac as ne,z as oe,g as ae,ak as se,ai as re,aj as ie,al as ce}from"./vue-vendor.1938e417.js";import{u as ue}from"./useWindowSizeFn.6b4ca4c0.js";const{t:pe}=C(),de={visible:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:pe("common.cancelText")},okText:{type:String,default:pe("common.okText")},closeFunc:Function},me=Object.assign({},de,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},visible:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number},enableComment:{type:Boolean,default:!1}});function fe(e){const t=(e,t)=>getComputedStyle(e)[t],l=l=>{if(!l)return;l.setAttribute("data-drag",j(e.draggable));const n=l.querySelector(".ant-modal-header"),o=l.querySelector(".ant-modal");n&&o&&j(e.draggable)&&(n.style.cursor="move",n.onmousedown=e=>{if(!e)return;const l=e.clientX,n=e.clientY,a=document.body.clientWidth,s=document.documentElement.clientHeight,r=o.offsetWidth,i=o.offsetHeight,c=o.offsetLeft,u=a-o.offsetLeft-r,p=o.offsetTop;let d=s-o.offsetTop-i;d<0&&(d=s-o.offsetTop);const m=t(o,"left"),f=t(o,"top");let g=+m,h=+f;m.includes("%")?(g=+document.body.clientWidth*(+m.replace(/%/g,"")/100),h=+document.body.clientHeight*(+f.replace(/%/g,"")/100)):(g=+m.replace(/px/g,""),h=+f.replace(/px/g,"")),document.onmousemove=function(e){let t=e.clientX-l,a=e.clientY-n;-t>c?t=-c:t>u&&(t=u),-a>p?a=-p:a>d&&(a=d),o.style.cssText+=`;left:${t+g}px;top:${a+h}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})};T((()=>{j(e.visible)&&j(e.draggable)&&v((()=>{(()=>{const n=document.querySelectorAll(".ant-modal-wrap");for(const o of Array.from(n)){if(!o)continue;const n=t(o,"display"),a=o.getAttribute("data-drag");"none"!==n&&(null===a||j(e.destroyOnClose))&&l(o)}})()}),30)}))}const ge=N({name:"Modal",inheritAttrs:!1,props:me,emits:["cancel"],setup(e,{slots:t,emit:l}){const{visible:n,draggable:o,destroyOnClose:a}=$(e),s=S();fe({visible:n,destroyOnClose:a,draggable:o});const c=e=>{l("cancel",e)};return()=>{let l;const n=i(r(r({},j(s)),e),{onCancel:c});return R(u,n,"function"==typeof(o=l=k(t))||"[object Object]"===Object.prototype.toString.call(o)&&!W(o)?l:{default:()=>[l]});var o}}}),he=Symbol();function be(){return F(he)}const ye=N({name:"ModalWrapper",components:{ScrollContainer:H},inheritAttrs:!1,props:{loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:100},height:{type:Number},footerOffset:{type:Number,default:0},visible:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},emits:["height-change","ext-height"],setup(e,{emit:t}){const l=_(null),n=_(null),o=_(0),a=_(0);let s=0;ue(i.bind(null,!1)),p(n,(()=>{i()}),{attributes:!0,subtree:!0}),O({redoModalHeight:i},he);const r=E((()=>({minHeight:`${e.minHeight}px`,[e.fullScreen?"height":"maxHeight"]:`${j(o)}px`})));function i(){return c(this,null,(function*(){if(!e.visible)return;const a=j(l);if(!a)return;const r=a.$el.parentElement;if(r){r.style.padding="0",yield z();try{const l=r.parentElement&&r.parentElement.parentElement;if(!l)return;const a=getComputedStyle(l).top,i=Number.parseInt(a);let c=window.innerHeight-2*i+(e.footerOffset||0)-e.modalFooterHeight-e.modalHeaderHeight;i<40&&(c-=26),yield z();const u=j(n);if(!u)return;yield z(),s=u.scrollHeight,e.fullScreen?o.value=window.innerHeight-e.modalFooterHeight-e.modalHeaderHeight-28:o.value=e.height?e.height:s>c?c:s,t("height-change",j(o))}catch(i){}}}))}return T((()=>{e.useWrapper&&i()})),A((()=>e.fullScreen),(e=>{i(),e?a.value=o.value:o.value=a.value})),q((()=>{const{modalHeaderHeight:l,modalFooterHeight:n}=e;t("ext-height",l+n)})),D((()=>{})),{wrapperRef:l,spinRef:n,spinStyle:r,scrollTop:function(){return c(this,null,(function*(){z((()=>{var e;const t=j(l);t&&(null==(e=null==t?void 0:t.scrollTo)||e.call(t,0))}))}))},setModalHeight:i}}}),Ce=["loading-tip"];const ve=B(ye,[["render",function(e,t,l,n,o,a){const s=L("ScrollContainer"),r=I("loading");return V(),Y(s,{ref:"wrapperRef"},{default:X((()=>[Z((V(),G("div",{ref:"spinRef",style:K(e.spinStyle),"loading-tip":e.loadingTip},[J(e.$slots,"default")],12,Ce)),[[r,e.loading]])])),_:3},512)}]]);const Se=B(N({name:"ModalClose",components:{Tooltip:d,FullscreenExitOutlined:m,FullscreenOutlined:f,CloseOutlined:g,LeftSquareOutlined:h,RightSquareOutlined:b},props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean},enableComment:{type:Boolean,default:!1},commentSpan:{type:Number,default:0}},emits:["cancel","fullscreen","comment"],setup(e,{emit:t}){const{prefixCls:l}=x("basic-modal-close"),{t:n}=C(),o=E((()=>[l,`${l}--custom`,{[`${l}--can-full`]:e.canFullscreen||e.enableComment}]));const a=E((()=>!0!==e.enableComment&&e.canFullscreen));return{t:n,getClass:o,prefixCls:l,handleCancel:function(e){t("cancel",e)},handleFullScreen:function(l){null==l||l.stopPropagation(),null==l||l.preventDefault(),0!=e.commentSpan&&0!=e.enableComment||t("fullscreen")},handleOpenComment:function(l){null==l||l.stopPropagation(),null==l||l.preventDefault(),0==e.fullScreen&&t("fullscreen"),t("comment",!0)},handleCloseComment:function(e){null==e||e.stopPropagation(),null==e||e.preventDefault(),t("comment",!1)},fullScreenStatus:a}}}),[["render",function(e,t,l,n,o,a){const s=L("FullscreenExitOutlined"),r=L("Tooltip"),i=L("FullscreenOutlined"),c=L("RightSquareOutlined"),u=L("LeftSquareOutlined"),p=L("CloseOutlined");return V(),G("div",{class:ee(e.getClass)},[e.fullScreenStatus?(V(),G(Q,{key:0},[e.fullScreen?(V(),Y(r,{key:0,title:e.t("component.modal.restore"),placement:"bottom"},{default:X((()=>[R(s,{role:"full",onClick:e.handleFullScreen},null,8,["onClick"])])),_:1},8,["title"])):(V(),Y(r,{key:1,title:e.t("component.modal.maximize"),placement:"bottom"},{default:X((()=>[R(i,{role:"close",onClick:e.handleFullScreen},null,8,["onClick"])])),_:1},8,["title"]))],64)):U("",!0),e.enableComment?(V(),G(Q,{key:1},[e.commentSpan>0?(V(),Y(r,{key:0,title:"收起",placement:"bottom"},{default:X((()=>[R(c,{onClick:e.handleCloseComment,style:{"font-size":"16px"}},null,8,["onClick"])])),_:1})):(V(),Y(r,{key:1,title:"展开",placement:"bottom"},{default:X((()=>[R(u,{onClick:e.handleOpenComment,style:{"font-size":"16px"}},null,8,["onClick"])])),_:1}))],64)):U("",!0),R(r,{title:e.t("component.modal.close"),placement:"bottom"},{default:X((()=>[R(p,{onClick:e.handleCancel},null,8,["onClick"])])),_:1},8,["title"])],2)}]]);const ke=B(N({name:"BasicModalFooter",props:me,emits:["ok","cancel"],setup:(e,{emit:t})=>({handleOk:function(e){t("ok",e)},handleCancel:function(e){t("cancel",e)}})}),[["render",function(e,t,l,n,o,a){const s=L("a-button");return V(),G("div",null,[J(e.$slots,"insertFooter"),e.showCancelBtn?(V(),Y(s,ne({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:X((()=>[te(le(e.cancelText),1)])),_:1},16,["onClick"])):U("",!0),J(e.$slots,"centerFooter"),e.showOkBtn?(V(),Y(s,ne({key:1,type:e.okType,onClick:e.handleOk,loading:e.confirmLoading},e.okButtonProps),{default:X((()=>[te(le(e.okText),1)])),_:1},16,["type","onClick","loading"])):U("",!0),J(e.$slots,"appendFooter")])}]]),Oe=N({name:"BasicModalHeader",components:{BasicTitle:P},emits:["dblclick"],props:{helpMessage:{type:[String,Array]},title:{type:String}}});const Fe=B(N({name:"BasicModal",components:{Modal:ge,ModalWrapper:ve,ModalClose:Se,ModalFooter:ke,ModalHeader:B(Oe,[["render",function(e,t,l,n,o,a){const s=L("BasicTitle");return V(),Y(s,{helpMessage:e.helpMessage},{default:X((()=>[te(le(e.title),1)])),_:1},8,["helpMessage"])}]])},inheritAttrs:!1,props:me,emits:["visible-change","height-change","cancel","ok","register","update:visible"],setup(e,{emit:t,attrs:l,slots:n}){const o=_(!1),a=_(null),s=_(null),{prefixCls:u}=x("basic-modal"),p=_(0),d={setModalProps:function(e){a.value=M(j(a)||{},e),Reflect.has(e,"visible")&&(o.value=!!e.visible);Reflect.has(e,"defaultFullscreen")&&(C.value=!!e.defaultFullscreen)},emitVisible:void 0,redoModalHeight:()=>{z((()=>{j(s)&&j(s).setModalHeight()}))}},m=ae();m&&t("register",d,m.uid);const f=E((()=>r(r({},e),j(a)))),g=E((()=>!j(f).title&&!n.title)),{handleFullScreen:h,getWrapClassName:b,fullScreenRef:C}=function(e){const t=_(!1);return{getWrapClassName:E((()=>{const l=j(e.wrapClassName)||"";return j(t)?`fullscreen-modal ${l} `:j(l)})),handleFullScreen:function(e){e&&e.stopPropagation(),t.value=!j(t)},fullScreenRef:t}}({modalWrapperRef:s,extHeightRef:p,wrapClassName:oe(f.value,"wrapClassName")}),v=E((()=>{const e=i(r({},j(f)),{visible:j(o),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return i(r({},e),{wrapClassName:j(b)})})),S=E((()=>{const e=i(r(r({},l),j(f)),{visible:j(o),wrapClassName:j(b)});return j(C)?y(e,["height","title"]):y(e,"title")})),k=E((()=>{if(!j(C))return j(v).height}));T((()=>{C.value=!!e.defaultFullscreen})),T((()=>{o.value=!!e.visible})),A((()=>j(o)),(l=>{var n;t("visible-change",l),t("update:visible",l),m&&(null==(n=d.emitVisible)||n.call(d,l,m.uid)),z((()=>{e.scrollTop&&l&&j(s)&&j(s).scrollTop()}))}),{immediate:!1});const O=_(0);function F(e){O.value=!0===e?6:0}return A((()=>e.enableComment),(e=>{F(e)}),{immediate:!0}),{handleCancel:function(l){return c(this,null,(function*(){var n,a;if(null==l||l.stopPropagation(),!(null==(a=null==(n=l.target)?void 0:n.classList)?void 0:a.contains(u+"-close--custom")))if(e.closeFunc&&w(e.closeFunc)){const t=yield e.closeFunc();o.value=!t}else o.value=!1,t("cancel",l)}))},getBindValue:S,getProps:v,handleFullScreen:h,fullScreenRef:C,getMergeProps:f,handleOk:function(e){t("ok",e)},visibleRef:o,omit:y,modalWrapperRef:s,handleExtHeight:function(e){p.value=e},handleHeightChange:function(e){t("height-change",e)},handleTitleDbClick:function(t){e.canFullscreen&&(t.stopPropagation(),h(t))},getWrapperHeight:k,commentSpan:O,handleComment:F,isNoTitle:g}}}),[["render",function(e,t,l,n,o,a){const s=L("ModalClose"),r=L("ModalHeader"),i=L("ModalFooter"),c=L("ModalWrapper"),u=L("a-col"),p=L("a-row"),d=L("Modal");return V(),Y(d,ne(e.getBindValue,{onCancel:e.handleCancel}),se({default:X((()=>[R(p,{class:"jeecg-modal-wrapper"},{default:X((()=>[R(u,{span:24-e.commentSpan,class:"jeecg-modal-content"},{default:X((()=>[R(c,ne({useWrapper:e.getProps.useWrapper,footerOffset:e.wrapperFooterOffset,fullScreen:e.fullScreenRef,ref:"modalWrapperRef",loading:e.getProps.loading,"loading-tip":e.getProps.loadingTip,minHeight:e.getProps.minHeight,height:e.getWrapperHeight,visible:e.visibleRef,modalFooterHeight:void 0===e.footer||e.footer?void 0:0},e.omit(e.getProps.wrapperProps,"visible","height","modalFooterHeight"),{onExtHeight:e.handleExtHeight,onHeightChange:e.handleHeightChange}),{default:X((()=>[J(e.$slots,"default")])),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","visible","modalFooterHeight","onExtHeight","onHeightChange"])])),_:3},8,["span"]),R(u,{span:e.commentSpan,class:"jeecg-comment-outer"},{default:X((()=>[J(e.$slots,"comment")])),_:3},8,["span"])])),_:3})])),_:2},[e.$slots.closeIcon?void 0:{name:"closeIcon",fn:X((()=>[R(s,{canFullscreen:e.getProps.canFullscreen,fullScreen:e.fullScreenRef,commentSpan:e.commentSpan,enableComment:e.getProps.enableComment,onComment:e.handleComment,onCancel:e.handleCancel,onFullscreen:e.handleFullScreen},null,8,["canFullscreen","fullScreen","commentSpan","enableComment","onComment","onCancel","onFullscreen"])])),key:"0"},e.isNoTitle?void 0:{name:"title",fn:X((()=>[R(r,{helpMessage:e.getProps.helpMessage,title:e.getMergeProps.title,onDblclick:e.handleTitleDbClick},null,8,["helpMessage","title","onDblclick"])])),key:"1"},e.$slots.footer?void 0:{name:"footer",fn:X((()=>[R(i,ne(e.getBindValue,{onOk:e.handleOk,onCancel:e.handleCancel}),se({_:2},[re(Object.keys(e.$slots),(t=>({name:t,fn:X((l=>[J(e.$slots,t,ie(ce(l||{})))]))})))]),1040,["onOk","onCancel"])])),key:"2"},re(Object.keys(e.omit(e.$slots,"default")),(t=>({name:t,fn:X((l=>[J(e.$slots,t,ie(ce(l||{})))]))})))]),1040,["onCancel"])}]]),He=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{He as B,Fe as b,be as u};
