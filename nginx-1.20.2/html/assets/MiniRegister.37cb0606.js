var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,a,l)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,c=(e,s,a)=>new Promise(((l,o)=>{var i=e=>{try{c(a.next(e))}catch(s){o(s)}},n=e=>{try{c(a.throw(e))}catch(s){o(s)}},c=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,n);c((a=a.apply(e,s)).next())}));import{u as r,ay as t,aI as u,A as d,_ as p}from"./index.8e60a3c0.js";import{S as m}from"./useLogin.5ee5275e.js";import{j as v}from"./jeecg_ad_text.355e51a4.js";import{d as f,k as y,r as g,Y as w,a2 as b,a3 as x,a7 as h,u as k,f as P,ad as _,ag as j,Z as O,J as I}from"./vue-vendor.1938e417.js";import"./vendor.ece5be17.js";import"./__commonjsHelpers__.488ed5c2.js";const C="/assets/icon-eye-k.62c61241.png",U="/assets/icon-eye-g.a35cc0c0.png",E={class:"aui-content"},T={class:"aui-container"},M={class:"aui-form"},S={class:"aui-image"},B={class:"aui-image-text"},F=["src"],R={class:"aui-formBox"},N={class:"aui-formWell"},A={class:"aui-flex aui-form-nav aui-clear-left",style:{"padding-bottom":"21px"}},D={class:"aui-flex-box activeNav on"},G={class:"aui-form-box"},H={class:"aui-account aui-account-line"},J={class:"aui-input-line"},L={class:"aui-input-line"},W={class:"aui-input-line"},Y={key:1,class:"aui-code-line"},Z={class:"aui-input-line"},q={class:"aui-eye"},z=["src"],K=["src"],Q={class:"aui-input-line"},V={class:"aui-eye"},X=["src"],$=["src"],ee={class:"aui-flex"},se={class:"aui-flex-box"},ae={class:"aui-choice"},le={style:{color:"#1b90ff","margin-left":"4px"}},oe={class:"aui-formButton"},ie={class:"aui-flex"},ne={class:"aui-flex"},ce=f({name:"mini-register"}),re=f((te=((e,s)=>{for(var a in s||(s={}))o.call(s,a)&&n(e,a,s[a]);if(l)for(var a of l(s))i.call(s,a)&&n(e,a,s[a]);return e})({},ce),s(te,a({emits:["go-back","success","register"],setup(e,{expose:s,emit:a}){const{t:l}=r(),{notification:o,createErrorModal:i,createMessage:n}=d(),p=y(),f=g({username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),ce=y(!0),re=y(60),te=y(null),ue=y("close"),de=y("close");function pe(){a("go-back"),fe()}function me(){return c(this,null,(function*(){if(f.mobile){if(yield t({mobile:f.mobile,smsmode:m.REGISTER})){const e=60;k(te)||(re.value=e,ce.value=!1,te.value=setInterval((()=>{k(re)>0&&k(re)<=e?re.value=re.value-1:(ce.value=!0,clearInterval(k(te)),te.value=null)}),1e3))}}else n.warn(l("sys.login.mobilePlaceholder"))}))}function ve(){f.username?f.mobile?f.smscode?f.password?f.confirmPassword?f.password===f.confirmPassword?f.policy?function(){c(this,null,(function*(){try{const e=yield u(I({username:f.username,password:f.password,phone:f.mobile,smscode:f.smscode}));e&&e.data.success?(o.success({description:e.data.message||l("sys.api.registerMsg"),duration:3}),a("success",{username:f.username,password:f.password}),fe()):o.warning({message:l("sys.api.errorTip"),description:e.data.message||l("sys.api.networkExceptionMsg"),duration:3})}catch(e){o.error({message:l("sys.api.errorTip"),description:e.message||l("sys.api.networkExceptionMsg"),duration:3})}}))}():n.warn(l("sys.login.policyPlaceholder")):n.warn(l("sys.login.diffPwd")):n.warn(l("sys.login.confirmPassword")):n.warn(l("sys.login.passwordPlaceholder")):n.warn(l("sys.login.smsPlaceholder")):n.warn(l("sys.login.mobilePlaceholder")):n.warn(l("sys.login.accountPlaceholder"))}function fe(){Object.assign(f,{username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),k(te)||(ce.value=!0,clearInterval(k(te)),te.value=null),p.value.resetFields()}function ye(e){ue.value=e}function ge(e){de.value=e}return s({initForm:fe}),(e,s)=>{const a=w("Icon"),o=w("a-input"),i=w("a-form-item"),n=w("a-checkbox"),c=w("a-form");return b(),x("div",E,[h("div",T,[h("div",M,[h("div",S,[h("div",B,[h("img",{src:k(v),alt:""},null,8,F)])]),h("div",R,[h("div",N,[P(c,{ref_key:"formRef",ref:p,model:f},{default:_((()=>[h("div",A,[h("div",D,j(k(l)("sys.login.signUpFormTitle")),1)]),h("div",G,[h("div",H,[P(i,null,{default:_((()=>[h("div",J,[P(a,{class:"aui-icon",icon:"ant-design:user-outlined"}),P(o,{class:"fix-auto-fill",type:"text",placeholder:k(l)("sys.login.userName"),value:f.username,"onUpdate:value":s[0]||(s[0]=e=>f.username=e)},null,8,["placeholder","value"])])])),_:1}),P(i,null,{default:_((()=>[h("div",L,[P(a,{class:"aui-icon",icon:"ant-design:mobile-outlined"}),P(o,{class:"fix-auto-fill",type:"text",placeholder:k(l)("sys.login.mobile"),value:f.mobile,"onUpdate:value":s[1]||(s[1]=e=>f.mobile=e)},null,8,["placeholder","value"])])])),_:1}),P(i,null,{default:_((()=>[h("div",W,[P(a,{class:"aui-icon",icon:"ant-design:mail-outlined"}),P(o,{class:"fix-auto-fill",type:"text",placeholder:k(l)("sys.login.smsCode"),value:f.smscode,"onUpdate:value":s[2]||(s[2]=e=>f.smscode=e)},null,8,["placeholder","value"]),ce.value?(b(),x("div",{key:0,class:"aui-code-line",onClick:me},j(k(l)("component.countdown.normalText")),1)):(b(),x("div",Y,j(k(l)("component.countdown.sendText",[k(re.value)])),1))])])),_:1}),P(i,null,{default:_((()=>[h("div",Z,[P(a,{class:"aui-icon",icon:"ant-design:lock-outlined"}),P(o,{class:"fix-auto-fill",type:"close"===ue.value?"password":"text",placeholder:k(l)("sys.login.password"),value:f.password,"onUpdate:value":s[3]||(s[3]=e=>f.password=e)},null,8,["type","placeholder","value"]),h("div",q,["open"===ue.value?(b(),x("img",{key:0,src:k(C),alt:"开启",onClick:s[4]||(s[4]=e=>ye("close"))},null,8,z)):"close"===ue.value?(b(),x("img",{key:1,src:k(U),alt:"关闭",onClick:s[5]||(s[5]=e=>ye("open"))},null,8,K)):O("",!0)])])])),_:1}),P(i,null,{default:_((()=>[h("div",Q,[P(a,{class:"aui-icon",icon:"ant-design:lock-outlined"}),P(o,{class:"fix-auto-fill",type:"close"===de.value?"password":"text",placeholder:k(l)("sys.login.confirmPassword"),value:f.confirmPassword,"onUpdate:value":s[6]||(s[6]=e=>f.confirmPassword=e)},null,8,["type","placeholder","value"]),h("div",V,["open"===de.value?(b(),x("img",{key:0,src:k(C),alt:"开启",onClick:s[7]||(s[7]=e=>ge("close"))},null,8,X)):"close"===de.value?(b(),x("img",{key:1,src:k(U),alt:"关闭",onClick:s[8]||(s[8]=e=>ge("open"))},null,8,$)):O("",!0)])])])),_:1}),P(i,{name:"policy"},{default:_((()=>[h("div",ee,[h("div",se,[h("div",ae,[P(n,{checked:f.policy,"onUpdate:checked":s[9]||(s[9]=e=>f.policy=e)},null,8,["checked"]),h("span",le,j(k(l)("sys.login.policy")),1)])])])])),_:1})])]),h("div",oe,[h("div",ie,[h("a",{class:"aui-link-login aui-flex-box",onClick:ve},j(k(l)("sys.login.registerButton")),1)]),h("div",ne,[h("a",{class:"aui-linek-code aui-flex-box",onClick:pe},j(k(l)("sys.login.backSignIn")),1)])])])),_:1},8,["model"])])])])])])}}}))));var te;const ue=p(re,[["__scopeId","data-v-dcdb3616"]]);export{ue as default};
