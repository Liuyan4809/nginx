import{_ as e,ap as a,z as s}from"./vendor.ece5be17.js";import{S as r}from"./index.ea04f0eb.js";import{u as o,aA as t,A as n,_ as l}from"./index.8e60a3c0.js";import{a as m,b as u}from"./useLogin.5ee5275e.js";import{d,k as c,r as p,J as i,Y as f,a2 as v,ab as h,ad as g,f as w,E as x}from"./vue-vendor.1938e417.js";import"./__commonjsHelpers__.488ed5c2.js";const b=l(d({name:"step2",components:{Button:e,Form:a,FormItem:a.Item,InputPassword:s.Password,Input:s,StrengthMeter:r},props:{accountInfo:{type:Object,default:()=>({})}},emits:["prevStep","nextStep"],setup(e,{emit:a}){const{t:s}=o(),{createErrorModal:r}=n(),{accountInfo:l}=e,d=c(),f=p({username:l.obj.username||"",password:"",confirmPassword:""}),{getFormRules:v}=m(f),{validForm:h}=u(d);return{t:s,formRef:d,formData:f,getFormRules:v,handleNext:function(){return e=this,o=null,n=function*(){const e=yield h();if(!e)return;const o=yield t(i({username:e.username,password:e.password,smscode:l.obj.smscode,phone:l.obj.phone}));o.success?a("nextStep",l.obj):r({title:s("sys.api.errorTip"),content:o.message||s("sys.api.networkExceptionMsg")})},new Promise(((a,s)=>{var r=e=>{try{l(n.next(e))}catch(a){s(a)}},t=e=>{try{l(n.throw(e))}catch(a){s(a)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,t);l((n=n.apply(e,o)).next())}));var e,o,n},handlePrev:function(){a("prevStep",l.obj)}}}}),[["render",function(e,a,s,r,o,t){const n=f("Input"),l=f("FormItem"),m=f("StrengthMeter"),u=f("InputPassword"),d=f("Button"),c=f("Form");return v(),h(c,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:g((()=>[w(l,{name:"username",class:"enter-x"},{default:g((()=>[w(n,{size:"large",value:e.formData.username,"onUpdate:value":a[0]||(a[0]=a=>e.formData.username=a),placeholder:e.t("sys.login.userName"),disabled:""},null,8,["value","placeholder"])])),_:1}),w(l,{name:"password",class:"enter-x"},{default:g((()=>[w(m,{size:"large",value:e.formData.password,"onUpdate:value":a[1]||(a[1]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),w(l,{name:"confirmPassword",class:"enter-x"},{default:g((()=>[w(u,{size:"large",visibilityToggle:"",value:e.formData.confirmPassword,"onUpdate:value":a[2]||(a[2]=a=>e.formData.confirmPassword=a),placeholder:e.t("sys.login.confirmPassword")},null,8,["value","placeholder"])])),_:1}),w(l,{class:"enter-x"},{default:g((()=>[w(d,{type:"primary",size:"large",block:"",onClick:e.handlePrev},{default:g((()=>[x(" 上一步 ")])),_:1},8,["onClick"]),w(d,{size:"large",block:"",class:"mt-4",onClick:e.handleNext},{default:g((()=>[x(" 下一步 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])}]]);export{b as default};
