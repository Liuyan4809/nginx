var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,n=(e,t)=>{for(var s in t||(t={}))l.call(t,s)&&r(e,s,t[s]);if(o)for(var s of o(t))a.call(t,s)&&r(e,s,t[s]);return e},i=(e,o)=>t(e,s(o));import{u as c,a as u,_ as p,B as d,p as f,S as g,b as y,c as w,i as h,e as v,f as b,h as k,w as C}from"./index.8e60a3c0.js";import{aV as m,af as D,aH as x,y as B}from"./vendor.ece5be17.js";import{d as O,e as $,Y as P,a2 as S,a3 as j,F as T,R as _,ab as F,ad as V,E as H,ag as L,ac as A,Z as E,a4 as I,a9 as M,a7 as N,f as R,k as q,u as J,J as Y,w as Z,q as z,g as G,v as K,ak as Q,t as U,ai as W,aj as X,al as ee,r as te,s as se}from"./vue-vendor.1938e417.js";const{t:oe}=c(),le={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:oe("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:oe("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},ae=n({class:{type:[String,Object,Array]},isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},le);const re=p(O({name:"BasicDrawerFooter",props:i(n({},le),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:t}){const{prefixCls:s}=u("basic-drawer-footer");return{handleOk:function(){t("ok")},prefixCls:s,handleClose:function(){t("close")},getStyle:$((()=>{const t=`${e.height}`;return{height:t,lineHeight:t}}))}}}),[["render",function(e,t,s,o,l,a){const r=P("a-button");return e.showFooter||e.$slots.footer?(S(),j("div",{key:0,class:I(e.prefixCls),style:M(e.getStyle)},[e.$slots.footer?_(e.$slots,"footer",{key:1}):(S(),j(T,{key:0},[_(e.$slots,"insertFooter"),e.showCancelBtn?(S(),F(r,A({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:V((()=>[H(L(e.cancelText),1)])),_:1},16,["onClick"])):E("",!0),_(e.$slots,"centerFooter"),e.showOkBtn?(S(),F(r,A({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:V((()=>[H(L(e.okText),1)])),_:1},16,["type","onClick","loading"])):E("",!0),_(e.$slots,"appendFooter")],64))],6)):E("",!0)}]]),ne=O({name:"BasicDrawerHeader",components:{BasicTitle:d,ArrowLeftOutlined:m},props:{isDetail:f.bool,showDetailBack:f.bool,title:f.string},emits:["close"],setup(e,{emit:t}){const{prefixCls:s}=u("basic-drawer-header");return{prefixCls:s,handleClose:function(){t("close")}}}}),ie={key:1};const ce=p(O({components:{Drawer:D,ScrollContainer:g,DrawerFooter:re,DrawerHeader:p(ne,[["render",function(e,t,s,o,l,a){const r=P("BasicTitle"),n=P("ArrowLeftOutlined");return e.isDetail?(S(),j("div",{key:1,class:I([e.prefixCls,`${e.prefixCls}--detail`])},[N("span",{class:I(`${e.prefixCls}__twrap`)},[e.showDetailBack?(S(),j("span",{key:0,onClick:t[0]||(t[0]=(...t)=>e.handleClose&&e.handleClose(...t))},[R(n,{class:I(`${e.prefixCls}__back`)},null,8,["class"])])):E("",!0),e.title?(S(),j("span",ie,L(e.title),1)):E("",!0)],2),N("span",{class:I(`${e.prefixCls}__toolbar`)},[_(e.$slots,"titleToolbar")],2)],2)):(S(),F(r,{key:0,class:I(e.prefixCls)},{default:V((()=>[_(e.$slots,"title"),H(" "+L(e.$slots.title?"":e.title),1)])),_:3},8,["class"]))}]])},inheritAttrs:!1,props:ae,emits:["visible-change","ok","close","register"],setup(e,{emit:t}){const s=q(!1),o=y(),l=q(null),{t:a}=c(),{prefixVar:r,prefixCls:p}=u("basic-drawer"),d={setDrawerProps:function(e){l.value=w(J(l)||{},e),Reflect.has(e,"visible")&&(s.value=!!e.visible)},emitVisible:void 0},f=G();f&&t("register",d,f.uid);const g=$((()=>w(Y(e),J(l)))),b=$((()=>{const e=i(n(n({placement:"right"},J(o)),J(g)),{visible:J(s)});e.title=void 0;let{isDetail:t,width:l,wrapClassName:a,getContainer:c}=e;if(t){l||(e.width="100%");const t=`${p}__detail`;a=e.class?e.class:a,e.class=a?`${a} ${t}`:t,c||(e.getContainer=`.${r}-layout-content`)}return e})),k=q(!0),C=$((()=>n(n({},o),J(b)))),m=$((()=>{const{footerHeight:e,showFooter:t}=J(b);return t&&e?h(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),D=$((()=>({position:"relative",height:`calc(100% - ${J(m)})`}))),x=$((()=>{var e;return!!(null==(e=J(b))?void 0:e.loading)}));return Z((()=>e.visible),((e,t)=>{e!==t&&(s.value=e)}),{deep:!0}),Z((()=>s.value),(s=>{z((()=>{var o;e.destroyOnClose?k.value=!!b.value.visible:k.value=!0,t("visible-change",s),f&&(null==(o=d.emitVisible)||o.call(d,s,f.uid))}))})),{onClose:function(e){return o=this,l=null,a=function*(){const{closeFunc:o}=J(b);if(t("close",e),o&&v(o)){const e=yield o();s.value=!e}else s.value=!1},new Promise(((t,s)=>{var r=t=>{try{i(a.next(t))}catch(e){s(e)}},n=t=>{try{i(a.throw(t))}catch(e){s(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);i((a=a.apply(o,l)).next())}));var o,l,a},t:a,prefixCls:p,getMergeProps:g,getScrollContentStyle:D,getProps:b,getLoading:x,getBindValues:C,getFooterHeight:m,handleOk:function(){t("ok")},destroyVisible:k}}}),[["render",function(e,t,s,o,l,a){const r=P("DrawerHeader"),n=P("ScrollContainer"),i=P("DrawerFooter"),c=P("Drawer"),u=K("loading");return e.destroyVisible?(S(),F(c,A({key:0,class:e.prefixCls,onClose:e.onClose},e.getBindValues),Q({default:V((()=>[e.destroyVisible?U((S(),F(n,{key:0,style:M(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:V((()=>[_(e.$slots,"default")])),_:3},8,["style","loading-tip"])),[[u,e.getLoading]]):E("",!0),e.destroyVisible?(S(),F(i,A({key:1},e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),Q({_:2},[W(Object.keys(e.$slots),(t=>({name:t,fn:V((s=>[_(e.$slots,t,X(ee(s||{})))]))})))]),1040,["onClose","onOk","height"])):E("",!0)])),_:2},[e.destroyVisible&&!e.$slots.title?{name:"title",fn:V((()=>[R(r,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:V((()=>[_(e.$slots,"titleToolbar")])),_:3},8,["title","isDetail","showDetailBack","onClose"])])),key:"0"}:e.destroyVisible?{name:"title",fn:V((()=>[_(e.$slots,"title")])),key:"1"}:void 0]),1040,["class","onClose"])):E("",!0)}]]),ue=te({}),pe=te({});function de(){if(!G())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=q(null),t=q(!1),s=q("");const o=()=>{const t=J(e);return t||k("useDrawer instance is undefined!"),t};return[function(o,l){B((()=>{e.value=null,t.value=null,ue[J(s)]=null})),J(t)&&b()&&o===J(e)||(s.value=l,e.value=o,t.value=!0,o.emitVisible=(e,t)=>{pe[t]=e})},{setDrawerProps:e=>{var t;null==(t=o())||t.setDrawerProps(e)},getVisible:$((()=>pe[~~J(s)])),openDrawer:(e=!0,t,l=!0)=>{var a;if(null==(a=o())||a.setDrawerProps({visible:e}),!t)return;if(l)return ue[J(s)]=null,void(ue[J(s)]=Y(t));x(Y(ue[J(s)]),Y(t))||(ue[J(s)]=Y(t))},closeDrawer:()=>{var e;null==(e=o())||e.setDrawerProps({visible:!1})}}]}const fe=e=>{const t=q(null),s=G(),o=q("");if(!G())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const e=J(t);if(e)return e;k("useDrawerInner instance is undefined!")};return se((()=>{const t=ue[J(o)];t&&e&&v(e)&&z((()=>{e(t)}))})),[(e,l)=>{B((()=>{t.value=null})),o.value=l,t.value=e,null==s||s.emit("register",e,l)},{changeLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({confirmLoading:e})},getVisible:$((()=>pe[~~J(o)])),closeDrawer:()=>{var e;null==(e=l())||e.setDrawerProps({visible:!1})},setDrawerProps:e=>{var t;null==(t=l())||t.setDrawerProps(e)}}]},ge=C(ce);export{ge as B,de as a,fe as u};
