import{_ as e}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang.aa05cd79.js";import{ap as s,z as a,a2 as l,_ as o}from"./vendor.ece5be17.js";import{S as r}from"./index.ea04f0eb.js";import{C as i}from"./index.614f054b.js";import{u as n,aI as t,ay as c,A as d}from"./index.8e60a3c0.js";import{u,a as m,L as p,S as f,b as g}from"./useLogin.5ee5275e.js";import{d as y,k as v,r as _,e as h,a2 as x,a3 as w,f as b,ad as k,u as z,E,ag as P,F as j,Z as R,J as C}from"./vue-vendor.1938e417.js";const S=y({__name:"RegisterForm",setup(y){const S=s.Item,T=a.Password,{t:U}=n(),{handleBackLogin:F,getLoginState:I}=u(),{notification:L,createErrorModal:M}=d(),A=v(),B=v(!1),G=_({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:J}=m(G),{validForm:N}=g(A),Z=h((()=>z(I)===p.REGISTER));function q(){return e=this,s=null,a=function*(){const e=yield N();if(e)try{B.value=!0;const s=yield t(C({username:e.account,password:e.password,phone:e.mobile,smscode:e.sms}));s&&s.data.success?(L.success({description:s.data.message||U("sys.api.registerMsg"),duration:3}),F()):L.warning({message:U("sys.api.errorTip"),description:s.data.message||U("sys.api.networkExceptionMsg"),duration:3})}catch(s){L.error({message:U("sys.api.errorTip"),description:s.message||U("sys.api.networkExceptionMsg"),duration:3})}finally{B.value=!1}},new Promise(((l,o)=>{var r=e=>{try{n(a.next(e))}catch(s){o(s)}},i=e=>{try{n(a.throw(e))}catch(s){o(s)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())}));var e,s,a}function D(){return c({mobile:G.mobile,smsmode:f.REGISTER})}return(n,t)=>Z.value?(x(),w(j,{key:0},[b(e,{class:"enter-x"}),b(z(s),{class:"p-4 enter-x",model:G,rules:z(J),ref_key:"formRef",ref:A},{default:k((()=>[b(z(S),{name:"account",class:"enter-x"},{default:k((()=>[b(z(a),{class:"fix-auto-fill",size:"large",value:G.account,"onUpdate:value":t[0]||(t[0]=e=>G.account=e),placeholder:z(U)("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),b(z(S),{name:"mobile",class:"enter-x"},{default:k((()=>[b(z(a),{size:"large",value:G.mobile,"onUpdate:value":t[1]||(t[1]=e=>G.mobile=e),placeholder:z(U)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),b(z(S),{name:"sms",class:"enter-x"},{default:k((()=>[b(z(i),{size:"large",class:"fix-auto-fill",value:G.sms,"onUpdate:value":t[2]||(t[2]=e=>G.sms=e),placeholder:z(U)("sys.login.smsCode"),sendCodeApi:D},null,8,["value","placeholder"])])),_:1}),b(z(S),{name:"password",class:"enter-x"},{default:k((()=>[b(z(r),{size:"large",value:G.password,"onUpdate:value":t[3]||(t[3]=e=>G.password=e),placeholder:z(U)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),b(z(S),{name:"confirmPassword",class:"enter-x"},{default:k((()=>[b(z(T),{size:"large",visibilityToggle:"",value:G.confirmPassword,"onUpdate:value":t[4]||(t[4]=e=>G.confirmPassword=e),placeholder:z(U)("sys.login.confirmPassword")},null,8,["value","placeholder"])])),_:1}),b(z(S),{class:"enter-x",name:"policy"},{default:k((()=>[b(z(l),{checked:G.policy,"onUpdate:checked":t[5]||(t[5]=e=>G.policy=e),size:"small"},{default:k((()=>[E(P(z(U)("sys.login.policy")),1)])),_:1},8,["checked"])])),_:1}),b(z(o),{type:"primary",class:"enter-x",size:"large",block:"",onClick:q,loading:B.value},{default:k((()=>[E(P(z(U)("sys.login.registerButton")),1)])),_:1},8,["loading"]),b(z(o),{size:"large",block:"",class:"mt-4 enter-x",onClick:z(F)},{default:k((()=>[E(P(z(U)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])),_:1},8,["model","rules"])],64)):R("",!0)}});export{S as _};
