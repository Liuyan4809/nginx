import{O as e,Q as a,p as s,a as r,aa as o,au as t,N as n,u as i,R as c,M as l,aM as d,a3 as p,aN as u,A as m,_ as f}from"./index.8e60a3c0.js";import{H as g,G as _}from"./vendor.ece5be17.js";import{S as h}from"./siteSetting.276b5abd.js";import{u as k}from"./index.59c4280b.js";import"./index.a6220f15.js";import{h as v}from"./header.42ca8d70.js";import{r as w,q as b}from"./dict.api.8135afcd.js";import{d as j,e as x,k as C,Y as M,a2 as y,a3 as L,f as P,ad as U,a7 as D,a4 as I,ag as R,F as A}from"./vue-vendor.1938e417.js";import"./__commonjsHelpers__.488ed5c2.js";import"./LoginSelect.6f3b01ae.js";import"./BasicModal.cadf9873.js";import"./useWindowSizeFn.6b4ca4c0.js";import"./index.68bf9c8e.js";import"./index.bb2190bb.js";import"./useContentViewHeight.386160ed.js";import"./lock.620d9da5.js";const{createMessage:N}=m(),O=j({name:"UserDropdown",components:{Dropdown:g,Menu:_,MenuItem:e((()=>a((()=>import("./DropMenuItem.9fd9b8ee.js")),["assets/DropMenuItem.9fd9b8ee.js","assets/vendor.ece5be17.js","assets/vue-vendor.1938e417.js","assets/__commonjsHelpers__.488ed5c2.js","assets/vendor.fedf8829.css","assets/index.8e60a3c0.js","assets/index.16129c8a.css"]))),MenuDivider:_.Divider,LockAction:e((()=>a((()=>import("./LockModal.10299b7a.js")),["assets/LockModal.10299b7a.js","assets/index.8e60a3c0.js","assets/vendor.ece5be17.js","assets/vue-vendor.1938e417.js","assets/__commonjsHelpers__.488ed5c2.js","assets/vendor.fedf8829.css","assets/index.16129c8a.css","assets/index.a6220f15.js","assets/BasicModal.cadf9873.js","assets/useWindowSizeFn.6b4ca4c0.js","assets/BasicModal.f6892846.css","assets/index.361bf2db.css","assets/useForm.0379175d.js","assets/BasicForm.vue_vue_type_style_index_0_lang.daafa440.js","assets/index.614f054b.js","assets/useCountdown.293f285b.js","assets/index.15cc10f8.css","assets/JUpload.vue_vue_type_style_index_0_lang.9ab12372.js","assets/JUpload.2a8a7c7c.css","assets/index.ea04f0eb.js","assets/index.399aa0e3.css","assets/areaDataUtil.d2791cdd.js","assets/index.c01929c9.js","assets/BasicForm.1296fe13.css","assets/lock.620d9da5.js","assets/header.42ca8d70.js","assets/LockModal.aba0abca.css"]))),UpdatePassword:e((()=>a((()=>import("./UpdatePassword.4a72038a.js")),["assets/UpdatePassword.4a72038a.js","assets/validator.f9ca1444.js","assets/index.8e60a3c0.js","assets/vendor.ece5be17.js","assets/vue-vendor.1938e417.js","assets/__commonjsHelpers__.488ed5c2.js","assets/vendor.fedf8829.css","assets/index.16129c8a.css","assets/index.a6220f15.js","assets/BasicModal.cadf9873.js","assets/useWindowSizeFn.6b4ca4c0.js","assets/BasicModal.f6892846.css","assets/index.361bf2db.css","assets/useForm.0379175d.js","assets/BasicForm.vue_vue_type_style_index_0_lang.daafa440.js","assets/index.614f054b.js","assets/useCountdown.293f285b.js","assets/index.15cc10f8.css","assets/JUpload.vue_vue_type_style_index_0_lang.9ab12372.js","assets/JUpload.2a8a7c7c.css","assets/index.ea04f0eb.js","assets/index.399aa0e3.css","assets/areaDataUtil.d2791cdd.js","assets/index.c01929c9.js","assets/BasicForm.1296fe13.css"])))},props:{theme:s.oneOf(["dark","light"])},setup(){const{prefixCls:e}=r("header-user-dropdown"),{t:a}=i(),{getShowDoc:s,getUseLockPage:m}=k(),f=o(),g=t(),_=x((()=>{const{realName:e="",avatar:a,desc:s}=f.getUserInfo||{};return{realName:e,avatar:a||v,desc:s}})),j=x((()=>{let{avatar:e}=_.value;return e==v?e:c(e)})),[M,{openModal:y}]=n(),L=C();function P(){return e=this,a=null,s=function*(){if((yield w()).success){const e=yield b();d(u),p(u,e.result),N.success("刷新缓存完成！")}else N.error("刷新缓存失败！")},new Promise(((r,o)=>{var t=e=>{try{i(s.next(e))}catch(a){o(a)}},n=e=>{try{i(s.throw(e))}catch(a){o(a)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,n);i((s=s.apply(e,a)).next())}));var e,a,s}const U=C();return{prefixCls:e,t:a,getUserInfo:_,getAvatarUrl:j,handleMenuClick:function(e){switch(e.key){case"logout":f.confirmLoginOut();break;case"doc":l(h);break;case"lock":y(!0);break;case"cache":P();break;case"depart":L.value.show();break;case"password":U.value.show(f.getUserInfo.username);break;case"account":g("/system/usersetting")}},getShowDoc:s,register:M,getUseLockPage:m,loginSelectRef:L,updatePasswordRef:U}}}),S=["src"];const E=f(O,[["render",function(e,a,s,r,o,t){const n=M("MenuItem"),i=M("Menu"),c=M("Dropdown"),l=M("LockAction"),d=M("UpdatePassword");return y(),L(A,null,[P(c,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:U((()=>[P(i,{onClick:e.handleMenuClick},{default:U((()=>[P(n,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])])),_:1},8,["onClick"])])),default:U((()=>[D("span",{class:I([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[D("img",{class:I(`${e.prefixCls}__header`),src:e.getAvatarUrl},null,10,S),D("span",{class:I(`${e.prefixCls}__info hidden md:block`)},[D("span",{class:I([`${e.prefixCls}__name  `,"truncate"])},R(e.getUserInfo.realName),3)],2)],2)])),_:1},8,["overlayClassName"]),P(l,{onRegister:e.register},null,8,["onRegister"]),P(d,{ref:"updatePasswordRef"},null,512)],64)}]]);export{E as default};
