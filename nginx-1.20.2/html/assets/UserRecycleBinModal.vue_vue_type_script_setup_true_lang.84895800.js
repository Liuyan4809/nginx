var e=(e,n,t)=>new Promise(((o,i)=>{var a=e=>{try{l(t.next(e))}catch(n){i(n)}},s=e=>{try{l(t.throw(e))}catch(n){i(n)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,s);l((t=t.apply(e,n)).next())}));import{B as n}from"./index.a6220f15.js";import{B as t}from"./BasicTable.e3f897c9.js";import{T as o}from"./BasicForm.vue_vue_type_style_index_0_lang.daafa440.js";import"./TableImg.vue_vue_type_style_index_0_lang.bde218ee.js";import{u as i}from"./useTable.12b47fdb.js";import{r as a}from"./user.data.7a0af023.js";import{l as s,m as l,n as r}from"./validator.f9ca1444.js";import{L as d,A as c}from"./index.8e60a3c0.js";import{d as u,k as m,Y as f,a2 as p,ab as y,ad as _,f as g,u as b,E as v,Z as h,ac as w,J as k}from"./vue-vendor.1938e417.js";const x=u({__name:"UserRecycleBinModal",emits:["success","register"],setup(u,{emit:x}){const{createConfirm:j}=c(),C=m([]),[R]=d((()=>{C.value=[]})),[T,{reload:B}]=i({api:s,columns:a,rowKey:"id",striped:!0,useSearchForm:!1,showTableSetting:!1,clickToRowSelect:!1,bordered:!0,showIndexColumn:!1,pagination:!0,tableSetting:{fullScreen:!0},canResize:!1,actionColumn:{width:150,title:"操作",dataIndex:"action",fixed:void 0}}),I={type:"checkbox",columnWidth:50,selectedRowKeys:C,onChange:function(e){C.value=e}};function S(n){return e(this,null,(function*(){yield l({userIds:n.id},B),x("success")}))}function O(){S({id:k(b(C)).join(",")})}function F(n){return e(this,null,(function*(){yield r({userIds:n.id},B)}))}function K(){j({iconType:"warning",title:"删除",content:"确定要永久删除吗？删除后将不可恢复！",onOk:()=>F({id:k(b(C)).join(",")}),onCancel(){}})}function P(e){return[{label:"取回",icon:"ant-design:redo-outlined",popConfirm:{title:"是否确认还原",confirm:S.bind(null,e)}},{label:"彻底删除",icon:"ant-design:scissor-outlined",popConfirm:{title:"是否确认删除",confirm:F.bind(null,e)}}]}return(e,i)=>{const a=f("Icon"),s=f("a-menu-item"),l=f("a-menu"),r=f("a-button"),d=f("a-dropdown");return p(),y(b(n),w(e.$attrs,{onRegister:b(R),title:"用户回收站",showOkBtn:!1,width:"1000px",destroyOnClose:""}),{default:_((()=>[g(b(t),{onRegister:b(T),rowSelection:I},{tableTitle:_((()=>[C.value.length>0?(p(),y(d,{key:0},{overlay:_((()=>[g(l,null,{default:_((()=>[g(s,{key:"1",onClick:K},{default:_((()=>[g(a,{icon:"ant-design:delete-outlined"}),v(" 批量删除 ")])),_:1}),g(s,{key:"1",onClick:O},{default:_((()=>[g(a,{icon:"ant-design:redo-outlined"}),v(" 批量还原 ")])),_:1})])),_:1})])),default:_((()=>[g(r,null,{default:_((()=>[v("批量操作 "),g(a,{icon:"ant-design:down-outlined"})])),_:1})])),_:1})):h("",!0)])),bodyCell:_((({column:e,record:n})=>["action"===e.key?(p(),y(b(o),{key:0,actions:P(n)},null,8,["actions"])):h("",!0)])),_:1},8,["onRegister"])])),_:1},16,["onRegister"])}}});export{x as _};
