var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,o,s)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,i=(e,t,o)=>new Promise(((s,r)=>{var n=e=>{try{i(o.next(e))}catch(t){r(t)}},a=e=>{try{i(o.throw(e))}catch(t){r(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,a);i((o=o.apply(e,t)).next())}));import{B as l}from"./BasicTable.e3f897c9.js";import{T as c}from"./BasicForm.vue_vue_type_style_index_0_lang.daafa440.js";import"./TableImg.vue_vue_type_style_index_0_lang.bde218ee.js";import{_ as u}from"./UserDrawer.vue_vue_type_script_setup_true_lang.d104976a.js";import{J as p}from"./JThirdAppButton.3283ab59.js";import{_ as d}from"./UserQuitAgentModal.vue_vue_type_script_setup_true_name_user-quit-agent-modal_lang.6809b32c.js";import m from"./UserQuitModal.f8b2e19e.js";import{a as f}from"./index.a4c2ac5a.js";import{u as b}from"./useListPage.b9ed7a87.js";import"./index.a6220f15.js";import{N as _,aa as y,A as j}from"./index.8e60a3c0.js";import{b as g,u as w}from"./validator.f9ca1444.js";import{u as v,a as h}from"./user.data.7a0af023.js";import{d as S,Y as x,a2 as C,a3 as T,f as R,ad as O,E as P,u as U}from"./vue-vendor.1938e417.js";import"./vendor.ece5be17.js";import"./__commonjsHelpers__.488ed5c2.js";import"./useForm.0379175d.js";import"./useWindowSizeFn.6b4ca4c0.js";import"./BasicModal.cadf9873.js";import"./index.614f054b.js";import"./useCountdown.293f285b.js";import"./JUpload.vue_vue_type_style_index_0_lang.9ab12372.js";import"./index.ea04f0eb.js";import"./areaDataUtil.d2791cdd.js";import"./index.c01929c9.js";import"./useTable.12b47fdb.js";const k=S({name:"tenant-system-user"}),B=S((F=((e,t)=>{for(var o in t||(t={}))r.call(t,o)&&a(e,o,t[o]);if(s)for(var o of s(t))n.call(t,o)&&a(e,o,t[o]);return e})({},k),t(F,o({setup(e){const{createMessage:t,createConfirm:o}=j(),[s,{openDrawer:r}]=f(),[n,{openModal:a}]=_(),[S,{openModal:k}]=_(),B=y().getUserInfo.username,{prefixCls:F,tableContext:D,onExportXls:I,onImportXls:A}=b({designScope:"user-list",tableProps:{title:"租户用户列表",api:g,columns:v,size:"small",formConfig:{schemas:h},actionColumn:{width:120},beforeFetch:e=>(e.userTenantStatus="1,3,4",Object.assign({column:"createTime",order:"desc"},e))}}),[M,{reload:z,updateTableDataRecord:E},{rowSelection:J,selectedRows:L,selectedRowKeys:N}]=D;function Q(){r(!0,{isUpdate:!1,showFooter:!0,tenantSaas:!0})}function X(e){return i(this,null,(function*(){r(!0,{record:e,isUpdate:!0,showFooter:!0,tenantSaas:!0})}))}function q(e){return i(this,null,(function*(){r(!0,{record:e,isUpdate:!0,showFooter:!1,tenantSaas:!0})}))}function H(){z()}function K({isToLocal:e}){e&&z()}function W(e){return[{label:"编辑",onClick:X.bind(null,e)}]}function Y(e){return[{label:"详情",onClick:q.bind(null,e)},{label:"离职",onClick:G.bind(null,e.username),ifShow:()=>e.username!==e.createBy},{label:"同意",onClick:V.bind(null,e.id,"1"),ifShow:()=>("3"===e.status||"4"===e.status)&&e.createBy===B},{label:"拒绝",popConfirm:{title:"是否确认拒绝",confirm:V.bind(null,e.id,"4")},ifShow:()=>"3"===e.status&&e.createBy===B}]}function G(e){a(!0,{userName:e})}function V(e,o){w({userId:e,status:o}).then((e=>{e.success&&H()})).catch((e=>{t.warning(e.message)}))}return(e,t)=>{const o=x("a-button");return C(),T("div",null,[R(U(l),{onRegister:U(M),rowSelection:U(J)},{tableTitle:O((()=>[R(o,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:Q},{default:O((()=>[P(" 新增")])),_:1}),R(p,{"biz-type":"user","selected-row-keys":U(N),syncToApp:"",syncToLocal:"",onSyncFinally:K},null,8,["selected-row-keys"]),R(o,{type:"primary",onClick:t[0]||(t[0]=e=>U(k)(!0,{})),preIcon:"ant-design:user-delete-outlined"},{default:O((()=>[P("离职信息")])),_:1})])),action:O((({record:e})=>[R(U(c),{actions:W(e),dropDownActions:Y(e)},null,8,["actions","dropDownActions"])])),_:1},8,["onRegister","rowSelection"]),R(u,{onRegister:U(s),onSuccess:H},null,8,["onRegister"]),R(d,{onRegister:U(n),onSuccess:U(z)},null,8,["onRegister","onSuccess"]),R(m,{onRegister:U(S),onSuccess:U(z)},null,8,["onRegister","onSuccess"])])}}}))));var F;export{B as default};
