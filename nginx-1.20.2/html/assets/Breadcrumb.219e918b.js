var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&l(e,r,t[r]);return e},u=(e,n)=>t(e,r(n));import{d as i,k as c,_ as m,s as d,Y as p,a2 as v,a3 as h,f,ad as b,ab as y,Z as g,ag as j,E as C,a4 as O}from"./vue-vendor.1938e417.js";import{a1 as k}from"./vendor.ece5be17.js";import{I,p as w,a as x,bh as P,au as _,u as B,m as R,b7 as S,be as $,b5 as A,Y as E,_ as M}from"./index.8e60a3c0.js";import"./__commonjsHelpers__.488ed5c2.js";const D=i({name:"LayoutBreadcrumb",components:{Icon:I,[k.name]:k},props:{theme:w.oneOf(["dark","light"])},setup(){const e=c([]),{currentRoute:t}=m(),{prefixCls:r}=x("layout-breadcrumb"),{getShowBreadCrumbIcon:n}=P(),a=_(),{t:o}=B();function l(e,t){const r=[];return e.forEach((e=>{var n,a;t.includes(e.path)&&r.push(u(s({},e),{name:(null==(n=e.meta)?void 0:n.title)||e.name})),(null==(a=e.children)?void 0:a.length)&&r.push(...l(e.children,t))})),r}return d((()=>{return r=this,n=null,a=function*(){var r,n,a;if(t.value.name===S)return;const o=yield $(),i=t.value.matched,c=null==i?void 0:i[i.length-1];let m=t.value.path;c&&(null==(r=null==c?void 0:c.meta)?void 0:r.currentActiveMenu)&&(m=c.meta.currentActiveMenu);const d=A(o,m),p=l(o.filter((e=>e.path===d[0])),d);if(!p||0===p.length)return;const v=E(p,(e=>{const{meta:t,name:r}=e;if(!t)return!!r;const{title:n,hideBreadcrumb:a}=t;return!(!n||a)})).filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)}));(null==(n=t.value.meta)?void 0:n.currentActiveMenu)&&v.push(u(s({},t.value),{name:(null==(a=t.value.meta)?void 0:a.title)||t.value.name})),e.value=v},new Promise(((e,t)=>{var o=e=>{try{s(a.next(e))}catch(r){t(r)}},l=e=>{try{s(a.throw(e))}catch(r){t(r)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,l);s((a=a.apply(r,n)).next())}));var r,n,a})),{routes:e,t:o,prefixCls:r,getIcon:function(e){var t;return e.icon||(null==(t=e.meta)?void 0:t.icon)},getShowBreadCrumbIcon:n,handleClick:function(e,t,r){null==r||r.preventDefault();const{children:n,redirect:o,meta:l}=e;if(!(null==n?void 0:n.length)||o){if(!(null==l?void 0:l.carryParam))if(o&&R(o))a(o);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,a(e)}}else null==r||r.stopPropagation()},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}}),Y={key:1};const H=M(D,[["render",function(e,t,r,n,a,o){const l=p("Icon"),s=p("router-link"),u=p("a-breadcrumb");return v(),h("div",{class:O([e.prefixCls,`${e.prefixCls}--${e.theme}`])},[f(u,{routes:e.routes},{itemRender:b((({route:t,routes:r,paths:n})=>[e.getShowBreadCrumbIcon&&e.getIcon(t)?(v(),y(l,{key:0,icon:e.getIcon(t)},null,8,["icon"])):g("",!0),e.hasRedirect(r,t)?(v(),y(s,{key:2,to:"",onClick:r=>e.handleClick(t,n,r),style:{color:"inherit"}},{default:b((()=>[C(j(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(v(),h("span",Y,j(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)}]]);export{H as default};
