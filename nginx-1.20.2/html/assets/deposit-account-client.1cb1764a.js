var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&i(e,a,t[a]);return e},s=(e,t,a)=>new Promise(((n,l)=>{var o=e=>{try{r(a.next(e))}catch(t){l(t)}},i=e=>{try{r(a.throw(e))}catch(t){l(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);r((a=a.apply(e,t)).next())}));import{d as u,a2 as d,a3 as c,a7 as v,R as p,a4 as f,a9 as m,k as g,q as _,w as h,u as y,G as b,p as C,e as k,Y as w,ab as j,ak as x,ai as I,ad as S,aj as T,al as F,F as H,E as N,ag as O,ac as A,Z as $,f as R,B,ar as P}from"./vue-vendor.1938e417.js";import{d as D}from"./index.63790298.js";import{a as E,as as L,_ as W,x as K,m as M,i as z,p as J,w as U,N as Q}from"./index.8e60a3c0.js";import{al as q,o as G}from"./vendor.ece5be17.js";import{o as V,P as Y,B as Z}from"./BasicTable.e3f897c9.js";import{u as X}from"./useWindowSizeFn.6b4ca4c0.js";import{u as ee}from"./useContentViewHeight.386160ed.js";import{M as te,a as ae,_ as ne}from"./DrawerBreakdownOfConsumption.vue_vue_type_script_setup_true_lang.e882c904.js";import{g as le,a as oe}from"./api.5033f1c8.js";import ie from"./WalletCard.6821e415.js";import"./BasicForm.vue_vue_type_style_index_0_lang.daafa440.js";import"./TableImg.vue_vue_type_style_index_0_lang.bde218ee.js";import"./index.a6220f15.js";import{a as re}from"./index.a4c2ac5a.js";import{_ as se}from"./ModalTransfer.vue_vue_type_script_setup_true_lang.fdf06179.js";import{_ as ue}from"./DrawerJournalAccountOfCapital.vue_vue_type_script_setup_true_lang.c6fc49ce.js";import{_ as de}from"./GuideBubble.vue_vue_type_style_index_0_lang.4810c9d6.js";import"./__commonjsHelpers__.488ed5c2.js";import"./useForm.0379175d.js";import"./BasicModal.cadf9873.js";import"./ModalRecharge.vue_vue_type_style_index_0_lang.32bf12dd.js";import"./DrawerJournalAccountOfCapitalOfMediaAccount.vue_vue_type_style_index_0_lang.c49d216a.js";import"./index.614f054b.js";import"./useCountdown.293f285b.js";import"./JUpload.vue_vue_type_style_index_0_lang.9ab12372.js";import"./index.ea04f0eb.js";import"./areaDataUtil.d2791cdd.js";import"./index.c01929c9.js";const ce=W(u({name:"PageFooter",inheritAttrs:!1,setup(){const{prefixCls:e}=E("page-footer"),{getCalcContentWidth:t}=L();return{prefixCls:e,getCalcContentWidth:t}}}),[["render",function(e,t,a,n,l,o){return d(),c("div",{class:f(e.prefixCls),style:m({width:e.getCalcContentWidth})},[v("div",{class:f(`${e.prefixCls}__left`)},[p(e.$slots,"left",{},void 0,!0)],2),p(e.$slots,"default",{},void 0,!0),v("div",{class:f(`${e.prefixCls}__right`)},[p(e.$slots,"right",{},void 0,!0)],2)],6)}],["__scopeId","data-v-3e586038"]]);const ve=W(u({name:"PageWrapper",components:{PageFooter:ce,PageHeader:q},inheritAttrs:!1,props:{title:J.string,dense:J.bool,ghost:J.bool,content:J.string,contentStyle:{type:Object},contentBackground:J.bool,contentFullHeight:J.bool,contentClass:J.string,fixedHeight:J.bool,upwardSpace:J.oneOfType([J.number,J.string]).def(0)},setup(e,{slots:n,attrs:l}){const o=g(null),i=g(null),u=g(null),d=g(null),{prefixCls:c}=E("page-wrapper");C(Y,k((()=>e.fixedHeight)));const v=k((()=>e.contentFullHeight)),p=k((()=>e.upwardSpace)),{redoHeight:f,setCompensation:m,contentHeight:w}=function(e,t,a,n,l=0,o=g(0)){const i=g(null),{footerHeightRef:r}=ee();let u={useLayoutFooter:!0};function d(e,t="all"){var a,n,l,o;function i(e){return Number(e.replace(/[^\d]/g,""))}let r=0;const s="0px";if(e){const u=getComputedStyle(e),d=i(null!=(a=null==u?void 0:u.marginTop)?a:s),c=i(null!=(n=null==u?void 0:u.marginBottom)?n:s),v=i(null!=(l=null==u?void 0:u.paddingTop)?l:s),p=i(null!=(o=null==u?void 0:u.paddingBottom)?o:s);"all"===t?(r+=d,r+=c,r+=v,r+=p):"top"===t?(r+=d,r+=v):(r+=c,r+=p)}return r}function c(e){return null==e?null:e instanceof HTMLDivElement?e:e.$el}function v(){return s(this,null,(function*(){var s;if(!e.value)return;yield _();const v=c(y(t));if(!v)return;const{bottomIncludeBody:p}=K(v);let f=0;a.forEach((e=>{var t,a;f+=null!=(a=null==(t=c(y(e)))?void 0:t.offsetHeight)?a:0}));let m=null!=(s=d(v))?s:0;n.forEach((e=>{m+=d(c(y(e)))}));let g=0;function h(e,t){if(e&&t){const a=e.parentElement;a&&(M(t)?a.classList.contains(t)?g+=d(a,"bottom"):(g+=d(a,"bottom"),h(a,t)):z(t)&&t>0&&(g+=d(a,"bottom"),h(a,--t)))}}b(l)?h(v,y(l)):h(v,l);let C=p-y(r)-y(o)-f-m-g;const k=()=>{var e;null==(e=u.elements)||e.forEach((e=>{var t,a;C+=null!=(a=null==(t=c(y(e)))?void 0:t.offsetHeight)?a:0}))};u.useLayoutFooter&&y(r),k(),i.value=C}))}return V((()=>{_((()=>{v()}))})),X((()=>{v()}),50,{immediate:!0}),h((()=>[r.value]),(()=>{v()}),{flush:"post",immediate:!0}),{redoHeight:function(){_((()=>{v()}))},setCompensation:e=>{u=e},contentHeight:i}}(v,o,[i,d],[u],p);m({useLayoutFooter:!0,elements:[d]});const j=k((()=>{var t;return[c,{[`${c}--dense`]:e.dense},null!=(t=l.class)?t:{}]})),x=k((()=>(null==n?void 0:n.leftFooter)||(null==n?void 0:n.rightFooter))),I=k((()=>Object.keys(G(n,"default","leftFooter","rightFooter","headerContent")))),S=k((()=>{const{contentFullHeight:n,contentStyle:l,fixedHeight:o}=e;if(!n)return r({},l);const i=`${y(w)}px`;return r((s=r({},l),t(s,a({minHeight:i}))),o?{height:i}:{});var s})),T=k((()=>{const{contentBackground:t,contentClass:a}=e;return[`${c}-content`,a,{[`${c}-content-bg`]:t}]}));return h((()=>[x.value]),(()=>{f()}),{flush:"post",immediate:!0}),{getContentStyle:S,wrapperRef:o,headerRef:i,contentRef:u,footerRef:d,getClass:j,getHeaderSlots:I,prefixCls:c,getShowFooter:x,omit:G,getContentClass:T}}}),[["render",function(e,t,a,n,l,o){const i=w("PageHeader"),r=w("PageFooter");return d(),c("div",{class:f(e.getClass),ref:"wrapperRef"},[e.content||e.$slots.headerContent||e.title||e.getHeaderSlots.length?(d(),j(i,A({key:0,ghost:e.ghost,title:e.title},e.omit(e.$attrs,"class"),{ref:"headerRef"}),x({default:S((()=>[e.content?(d(),c(H,{key:0},[N(O(e.content),1)],64)):p(e.$slots,"headerContent",{key:1})])),_:2},[I(e.getHeaderSlots,(t=>({name:t,fn:S((a=>[p(e.$slots,t,T(F(a||{})))]))})))]),1040,["ghost","title"])):$("",!0),v("div",{class:f(["overflow-hidden",e.getContentClass]),style:m(e.getContentStyle),ref:"contentRef"},[p(e.$slots,"default")],6),e.getShowFooter?(d(),j(r,{key:1,ref:"footerRef"},{left:S((()=>[p(e.$slots,"leftFooter")])),right:S((()=>[p(e.$slots,"rightFooter")])),_:3},512)):$("",!0)],2)}]]);U(ce);const pe=U(ve),fe={[te.KSCiLiJinNiu]:{mediaId:ae.KSCiLiJinNiu,mediaType:te.KSCiLiJinNiu,others:[ae.KSCiLiJinNiuYiDong],mediaName:"磁力金牛",mediaTagName:"快手",tagName:"ks-table-list",icon:"icon-svg icon-svg_logo_ks",xlink:"#kuaishou-cilijinniu"},[te.TTQianChuan]:{mediaId:ae.TTQianChuan,mediaType:te.TTQianChuan,mediaName:"巨量千川",mediaTagName:"头条",tagName:"tt-pp-table-list",icon:"icon-svg icon-svg_logo_tt",xlink:"#douyin-qianchuan"}},me=[{dataIndex:"advertiserId",title:"投放账户ID / 名称",minWidth:260,fixed:"left"},{dataIndex:"corporationName",title:"开户主体名称",minWidth:160},{dataIndex:"expend",title:"今日消耗",minWidth:160,sorter:"true"},{dataIndex:"balance",title:"余额",minWidth:160,sorter:"true"},{dataIndex:"operation",title:"操作",width:320,fixed:"right"}],ge={key:0,class:"wallet-container"},_e={class:"wallet-wrap"},he=["onClick"],ye=v("div",{class:"BasicTable__title"},[N(" 投放账户列表 "),v("span",{class:"BasicTable__auxiliary"},"（注：此页面中所有涉及到的数字金额均为媒体币金额）")],-1),be=["title"],Ce={key:0},ke=u({__name:"deposit-account-client",setup(e){var t;const[a,{openModal:n}]=Q(),[l,{openDrawer:o}]=re(),[i,{openDrawer:r}]=re();let u=g(!1),p=g("20px"),m=g(""),x=g(""),T=g(null),F=g(),A=g([]);const E=g([]);let L=g(!1),W=g(1),K=g(30),M=g(null),z=g(null),J=g(0),U=g(null),q=g(null);const G=g(),V=g({enabled:!0,sticky:!0}),Y=g(!1),X=g(!1),ee=g({}),te=new IntersectionObserver(((e,t)=>{e.forEach((e=>{m.value="",x.value="",e.isIntersecting?u.value=!1:u.value=!0,u.value&&(e.boundingClientRect.left<0?m.value="0":x.value="0")}))}));let ae=k((()=>{var e;return(null==(e=ce.value)?void 0:e.mediaType)||null})),ce=k((()=>{let e=null;for(const t in we.value){let a=we.value[t];if(T.value===a.mediaId){e=a;break}}return e})),ve=k((()=>({}))),ke=k((()=>{var e;let t={mediaAccountId:null==(e=F.value)?void 0:e.mediaAccountId,keywords:q.value,pageSize:K.value,pageNumber:W.value};return M.value&&(t.sortFieldName=M.value,t.sortType="ascend"===z.value?"ASC":"DESC"),t}));const we=k((()=>{let e={},t=A.value;for(const a in fe){let n=fe[a],l=t.filter((e=>{var t;return n.mediaId===e.mediaId||(null==(t=n.others)?void 0:t.length)&&-1!==n.others.indexOf(e.mediaId)}));l.length&&(n.wallets=l,e[a]=n)}return e})),je=k((()=>{var e;return(null==(e=ce.value)?void 0:e.wallets)||[]}));function xe(){return new Promise((e=>{le({}).then((t=>{var a;A.value=(null==(a=t.objectData)?void 0:a.pageList)||[],e(t)}))}))}C("reload",(function(){return s(this,null,(function*(){yield xe(),Ie()}))})),C("mediaId",T),C("mediaType",ae),C("mediaAccountId",null==(t=F.value)?void 0:t.mediaAccountId),h((()=>we.value),(()=>{var e;let t=Object.keys(we.value);!T.value&&t.length&&(T.value=(null==(e=we.value[t[0]])?void 0:e.mediaId)||null)})),h((()=>T.value),(()=>{var e;W.value=1,E.value=[],F.value=null,(null==(e=je.value)?void 0:e.length)?F.value=je.value[0]||null:F.value=null,_((()=>{if(G.value){let e=G.value.swiper;e.update(),Y.value=e.isBeginning,X.value=e.isEnd,G.value.addEventListener("progress",(e=>{const[t]=e.detail;X.value=t.isEnd,Y.value=t.isBeginning}))}}))})),h((()=>F.value),((e,t)=>{W.value=1,E.value=[],function(e,t){_((()=>{t&&ee.value[t.mediaAccountId]&&te.unobserve(ee.value[t.mediaAccountId].$el),e&&ee.value[e.mediaAccountId]&&te.observe(ee.value[e.mediaAccountId].$el)}))}(e,t)})),h(ke,(()=>{Ie()})),h(ve,(()=>{xe()}),{immediate:!0});const Ie=D(500,(()=>{if(L.value=!1,!ke.value.mediaAccountId)return E.value=[],void(J.value=0);oe(ke.value).then((e=>{var t;E.value=(null==(t=e.objectData)?void 0:t.pageList)||[],J.value=e.objectData.totalCount||0})).finally((()=>{L.value=!1}))}));function Se(e,t,a){W.value=e.current,K.value=e.pageSize,M.value=a.field,z.value=a.order}function Te(){q.value=U.value}function Fe(){G.value.swiper.slideNext()}return(e,t)=>{const s=w("a-tab-pane"),g=w("a-tabs"),_=w("swiper-slide"),h=w("iconpark-icon"),C=w("swiper-container"),k=w("a-button"),A=w("a-input-search");return Object.keys(we.value).length?(d(),j(y(pe),{key:0,class:"deposit-account-client"},{default:S((()=>{var e;return[R(g,{activeKey:y(T),"onUpdate:activeKey":t[0]||(t[0]=e=>b(T)?T.value=e:T=e)},{default:S((()=>[(d(!0),c(H,null,I(we.value,((e,t)=>(d(),j(s,{tab:e.mediaName,key:e.mediaId},null,8,["tab"])))),128))])),_:1},8,["activeKey"]),je.value.length?(d(),c("div",ge,[v("div",_e,[R(C,{ref_key:"swiperEef",ref:G,class:"swiper-container",freeMode:V.value,slidesPerView:"auto"},{default:S((()=>[(d(!0),c(H,null,I(je.value,((e,t)=>(d(),j(_,{class:"swiper-slide",key:t},{default:S((()=>{var t;return[R(ie,{ref_for:!0,ref:t=>function(e,t){ee.value[t.mediaAccountId]=e}(t,e),class:f({"is-active":(null==(t=y(F))?void 0:t.mediaAccountId)===e.mediaAccountId}),data:e,onClick:t=>{return a=e,void(F.value=a);var a}},null,8,["class","data","onClick"])]})),_:2},1024)))),128)),Y.value?$("",!0):(d(),c("div",{key:0,class:"container-start",slot:"container-start",onClick:t[1]||(t[1]=B((e=>G.value.swiper.slidePrev()),["stop"]))},[R(h,{class:"iconpark-icon__jiantou-zuo",name:"jiantou-zuo"})])),X.value?$("",!0):(d(),c("div",{key:1,class:"container-end",slot:"container-end",onClick:B(Fe,["stop"])},[R(h,{class:"iconpark-icon__jiantou-you",name:"jiantou-you"})],8,he))])),_:1},8,["freeMode"]),R(de,{visitable:y(u),title:null==(e=y(F))?void 0:e.mediaAccountNum,top:y(p),left:y(m),right:y(x)},null,8,["visitable","title","top","left","right"])])])):$("",!0),R(y(Z),{class:f({"no-wallets":!je.value.length}),columns:y(me),dataSource:E.value,loading:y(L),showIndexColumn:!1,pagination:{current:y(W),pageSize:y(K),total:y(J),pageSizeOptions:["30","50","100"]},onChange:Se},{tableTitle:S((()=>[ye])),bodyCell:S((({column:e,record:t})=>["advertiserId"===e.key?(d(),c("span",{key:0,title:t.advertiserId+(t.advertiserName?" / "+t.advertiserName:"")},[N(O(t.advertiserId),1),t.advertiserName?(d(),c("span",Ce," / ")):$("",!0),N(O(t.advertiserName),1)],8,be)):$("",!0),"operation"===e.key?(d(),c(H,{key:1},[R(k,{type:"link",onClick:e=>y(n)(!0,{row:t,type:"2"})},{default:S((()=>[N("转入")])),_:2},1032,["onClick"]),R(k,{type:"link",onClick:e=>y(n)(!0,{row:t,type:"3"})},{default:S((()=>[N("转出")])),_:2},1032,["onClick"]),R(k,{type:"link",onClick:e=>y(o)(!0,{row:t})},{default:S((()=>[N("资金流水")])),_:2},1032,["onClick"]),R(k,{type:"link",onClick:e=>y(r)(!0,{row:t})},{default:S((()=>[N("消耗明细")])),_:2},1032,["onClick"])],64)):$("",!0)])),toolbar:S((()=>[R(A,{style:{width:"200px"},value:y(U),"onUpdate:value":t[2]||(t[2]=e=>b(U)?U.value=e:U=e),placeholder:"请输入关键字",onBlur:Te,onKeyup:P(Te,["enter"]),onSearch:Te},null,8,["value","onKeyup"])])),_:1},8,["class","columns","dataSource","loading","pagination"]),R(se,{onRegister:y(a)},null,8,["onRegister"]),R(ue,{onRegister:y(l)},null,8,["onRegister"]),R(ne,{onRegister:y(i)},null,8,["onRegister"])]})),_:1})):$("",!0)}}});export{ke as default};
